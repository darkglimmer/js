!function(t){var n={};function e(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n){var e=["                                                    \n................................................................................\n................................................................................\n................................................................................\n................................................................................\n................................................................................\n................................................................................\n..................................................................###...........\n...................................................##......##....##+##..........\n....................................o.o......##..................#+++#..........\n.................................................................##+##..........\n...................................#####..........................#v#...........\n............................................................................##..\n..##......................................o.o................................#..\n..#.....................o....................................................#..\n..#......................................#####.............................o.#..\n..#..........####.......o....................................................#..\n..#..@.......#..#................................................#####.......#..\n..############..###############...####################.....#######...#########..\n..............................#...#..................#.....#....................\n..............................#+++#..................#+++++#....................\n..............................#+++#..................#+++++#....................\n..............................#####..................#######....................\n................................................................................\n................................................................................\n","                                                                     \n................................................................................\n................................................................................\n....###############################.............................................\n...##.............................##########################################....\n...#.......................................................................##...\n...#....o...................................................................#...\n...#................................................=.......................#...\n...#.o........################...................o..o...........|........o..#...\n...#.........................#..............................................#...\n...#....o....................##########.....###################....##########...\n...#..................................#+++++#.................#....#............\n...###############....oo......=o.o.o..#######.###############.#....#............\n.....#...............o..o.............#.......#......#........#....#............\n.....#....................#############..######.####.#.########....########.....\n.....#.............########..............#...........#.#..................#.....\n.....#..........####......####...#####################.#..................#.....\n.....#........###............###.......................########....########.....\n.....#.......##................#########################......#....#............\n.....#.......#................................................#....#............\n.....###......................................................#....#............\n.......#...............o...........................................#............\n.......#...............................................o...........#............\n.......#########......###.....############.........................##...........\n.............#..................#........#####....#######.o.........########....\n.............#++++++++++++++++++#............#....#.....#..................#....\n.............#++++++++++++++++++#..........###....###...####.o.............#....\n.............####################..........#........#......#.....|.........#....\n...........................................#++++++++#......####............#....\n...........................................#++++++++#.........#........@...#....\n...........................................#++++++++#.........##############....\n...........................................##########...........................\n................................................................................\n","\n......................................#++#........................#######....................................#+#..\n......................................#++#.....................####.....####.................................#+#..\n......................................#++##########...........##...........##................................#+#..\n......................................##++++++++++##.........##.............##...............................#+#..\n.......................................##########++#.........#....................................o...o...o..#+#..\n................................................##+#.........#.....o...o....................................##+#..\n.................................................#+#.........#................................###############++#..\n.................................................#v#.........#.....#...#........................++++++++++++++##..\n.............................................................##..|...|...|..##............#####################...\n..............................................................##+++++++++++##............v........................\n...............................................................####+++++####......................................\n...............................................#.....#............#######........###.........###..................\n...............................................#.....#...........................#.#.........#.#..................\n...............................................#.....#.............................#.........#....................\n...............................................#.....#.............................##........#....................\n...............................................##....#.............................#.........#....................\n...............................................#.....#......o..o.....#...#.........#.........#....................\n...............#######........###...###........#.....#...............#...#.........#.........#....................\n..............##.....##.........#...#..........#.....#.....######....#...#...#########.......#....................\n.............##.......##........#.o.#..........#....##...............#...#...#...............#....................\n.....@.......#.........#........#...#..........#.....#...............#...#...#...............#....................\n....###......#.........#........#...#..........#.....#...............#...#####...######......#....................\n....#.#......#.........#.......##.o.##.........#.....#...............#.....o.....#.#.........#....................\n++++#.#++++++#.........#++++++##.....##++++++++##....#++++++++++.....#.....=.....#.#.........#....................\n++++#.#++++++#.........#+++++##.......##########.....#+++++++##+.....#############.##..o.o..##....................\n++++#.#++++++#.........#+++++#....o.................##++++++##.+....................##.....##.....................\n++++#.#++++++#.........#+++++#.....................##++++++##..+.....................#######......................\n++++#.#++++++#.........#+++++##.......##############++++++##...+..................................................\n++++#.#++++++#.........#++++++#########++++++++++++++++++##....+..................................................\n++++#.#++++++#.........#++++++++++++++++++++++++++++++++##.....+..................................................\n","\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n........................................o.....................................................................\n..............................................................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n.......................................###....................................................................\n.......................................#.#.................+++........+++..###................................\n.......................................#.#.................+#+........+#+.....................................\n.....................................###.###................#..........#......................................\n......................................#...#.................#...oooo...#.......###............................\n......................................#...#.................#..........#......#+++#...........................\n......................................#...#.................############.......###............................\n.....................................##...##......#...#......#................................................\n......................................#...#########...########..............#.#...............................\n......................................#...#...........#....................#+++#..............................\n......................................#...#...........#.....................###...............................\n.....................................##...##..........#.......................................................\n......................................#...#=.=.=.=....#............###........................................\n......................................#...#...........#...........#+++#.......................................\n......................................#...#....=.=.=.=#.....o......###.......###..............................\n.....................................##...##..........#.....................#+++#.............................\n..............................o...o...#...#...........#.....#................##v........###...................\n......................................#...#...........#..............#.................#+++#..................\n.............................###.###.###.###.....o.o..#++++++++++++++#...................v#...................\n.............................#.###.#.#.###.#..........#++++++++++++++#........................................\n.............................#.............#...#######################........................................\n.............................##...........##.........................................###......................\n..###.........................#.....#.....#.........................................#+++#................###..\n..#.#.........................#....###....#..........................................###.................#.#..\n..#...........................#....###....#######........................#####.............................#..\n..#...........................#...........#..............................#...#.............................#..\n..#...........................##..........#..............................#.#.#.............................#..\n..#.......................................#.......|####|....|####|.....###.###.............................#..\n..#................###.............o.o....#..............................#.........###.....................#..\n..#...............#####.......##..........#.............................###.......#+++#..........#.........#..\n..#...............o###o.......#....###....#.............................#.#........###..........###........#..\n..#................###........#############..#.oo.#....#.oo.#....#.oo..##.##....................###........#..\n..#......@..........#.........#...........#++#....#++++#....#++++#....##...##....................#.........#..\n..#############################...........#############################.....################################..\n..............................................................................................................\n..............................................................................................................\n","\n..................................................................................................###.#.......\n......................................................................................................#.......\n..................................................................................................#####.......\n..................................................................................................#...........\n..................................................................................................#.###.......\n..........................o.......................................................................#.#.#.......\n.............................................................................................o.o.o###.#.......\n...................###................................................................................#.......\n.......+..o..+................................................#####.#####.#####.#####.#####.#####.#####.......\n.......#.....#................................................#...#.#...#.#...#.#...#.#...#.#...#.#...........\n.......#=.o..#............#...................................###.#.###.#.###.#.###.#.###.#.###.#.#####.......\n.......#.....#..................................................#.#...#.#...#.#...#.#...#.#...#.#.....#.......\n.......+..o..+............o..................................####.#####.#####.#####.#####.#####.#######.......\n..............................................................................................................\n..........o..............###..............................##..................................................\n..............................................................................................................\n..............................................................................................................\n......................................................##......................................................\n...................###.........###............................................................................\n..............................................................................................................\n..........................o.....................................................#......#......................\n..........................................................##.....##...........................................\n.............###.........###.........###.................................#..................#.................\n..............................................................................................................\n.................................................................||...........................................\n..###########.................................................................................................\n..#.........#.o.#########.o.#########.o.##................................................#...................\n..#.........#...#.......#...#.......#...#.................||..................#.....#.........................\n..#..@......#####...o...#####...o...#####.....................................................................\n..#######.....................................#####.......##.....##.....###...................................\n........#=..................=................=#...#.....................###...................................\n........#######################################...#+++++++++++++++++++++###+++++++++++++++++++++++++++++++++++\n..................................................############################################################\n..............................................................................................................\n"];function o(t){let n=t.trim().split("\n").map(t=>[...t]);this.height=n.length,this.width=n[0].length,this.startActors=[],this.rows=n.map((t,n)=>t.map((t,e)=>{let o=r[t];return"string"==typeof o?o:(this.startActors.push(o.create(new l(e,n),t)),"empty")}))}p.prototype.size=new l(1,1);var s=class t{constructor(t,n,e){this.pos=t,this.basePos=n,this.wobble=e}get type(){return"coin"}static create(n){let e=n.plus(new l(.2,.1));return new t(e,e,Math.random()*Math.PI*2)}};s.prototype.size=new l(.6,.6);var r={".":"empty","#":"wall","+":"lava","@":a,o:s,"=":p,"|":p,v:p},i=class t{constructor(t,n,e){this.level=t,this.actors=n,this.status=e}static start(n){return new t(n,n.startActors,"playing")}get player(){return this.actors.find(t=>"player"==t.type)}},l=class t{constructor(t,n){this.x=t,this.y=n}plus(n){return new t(this.x+n.x,this.y+n.y)}times(n){return new t(this.x*n,this.y*n)}},a=class t{constructor(t,n){this.pos=t,this.speed=n}get type(){return"player"}static create(n){return new t(n.plus(new l(0,-.5)),new l(0,0))}};a.prototype.size=new l(.8,1.5);var p=class t{constructor(t,n,e){this.pos=t,this.speed=n,this.reset=e}get type(){return"lava"}static create(n,e){return"="==e?new t(n,new l(2,0)):"|"==e?new t(n,new l(0,2)):"v"==e?new t(n,new l(0,3),n):void 0}};function c(t,n,...e){let o=document.createElement(t);for(let t of Object.keys(n))o.setAttribute(t,n[t]);for(let t of e)o.appendChild(t);return o}var u=class{constructor(t,n){this.dom=c("div",{class:"game"},function(t){return c("table",{class:"background",style:`width: ${t.width*h}px`},...t.rows.map(t=>c("tr",{style:`height: ${h}px`},...t.map(t=>c("td",{class:t})))))}(n)),this.actorLayer=null,t.appendChild(this.dom)}clear(){this.dom.remove()}},h=20;u.prototype.setState=function(t){this.actorLayer&&this.actorLayer.remove(),this.actorLayer=c("div",{},...t.actors.map(t=>{let n=c("div",{class:`actor ${t.type}`});return n.style.width=`${t.size.x*h}px`,n.style.height=`${t.size.y*h}px`,n.style.left=`${t.pos.x*h}px`,n.style.top=`${t.pos.y*h}px`,n})),this.dom.appendChild(this.actorLayer),this.dom.className=`game ${t.status}`,this.scrollPlayerIntoView(t)},u.prototype.scrollPlayerIntoView=function(t){let n=this.dom.clientWidth,e=this.dom.clientHeight,o=n/3,s=this.dom.scrollLeft,r=s+n,i=this.dom.scrollTop,l=i+e,a=t.player,p=a.pos.plus(a.size.times(.5)).times(h);p.x<s+o?this.dom.scrollLeft=p.x-o:p.x>r-o&&(this.dom.scrollLeft=p.x+o-n),p.y<i+o?this.dom.scrollTop=p.y-o:p.y>l-o&&(this.dom.scrollTop=p.y+o-e)},o.prototype.touches=function(t,n,e){for(var o=Math.floor(t.x),s=Math.ceil(t.x+n.x),r=Math.floor(t.y),i=Math.ceil(t.y+n.y),l=r;l<i;l++)for(var a=o;a<s;a++){if((a<0||a>=this.width||l<0||l>=this.height?"wall":this.rows[l][a])==e)return!0}return!1},i.prototype.update=function(t,n){let e=this.actors.map(e=>e.update(t,this,n)),o=new i(this.level,e,this.status);if("playing"!=o.status)return o;let s=o.player;if(this.level.touches(s.pos,s.size,"lava"))return new i(this.level,e,"lost");for(let t of e)t!=s&&(l=s,(r=t).pos.x+r.size.x>l.pos.x&&r.pos.x<l.pos.x+l.size.x&&r.pos.y+r.size.y>l.pos.y&&r.pos.y<l.pos.y+l.size.y)&&(o=t.collide(o));var r,l;return o},p.prototype.collide=function(t){return new i(t.level,t.actors,"lost")},s.prototype.collide=function(t){let n=t.actors.filter(t=>t!=this),e=t.status;return n.some(t=>"coin"==t.type)||(e="won"),new i(t.level,n,e)},p.prototype.update=function(t,n){let e=this.pos.plus(this.speed.times(t));return n.level.touches(e,this.size,"wall")?this.reset?new p(this.reset,this.speed,this.reset):new p(this.pos,this.speed.times(-1)):new p(e,this.speed,this.reset)};s.prototype.update=function(t){let n=this.wobble+8*t,e=.07*Math.sin(n);return new s(this.basePos.plus(new l(0,e)),this.basePos,n)};a.prototype.update=function(t,n,e){let o=0;e.ArrowLeft&&(o-=7),e.ArrowRight&&(o+=7);let s=this.pos,r=s.plus(new l(o*t,0));n.level.touches(r,this.size,"wall")||(s=r);let i=this.speed.y+30*t,p=s.plus(new l(0,i*t));return n.level.touches(p,this.size,"wall")?i=e.ArrowUp&&i>0?-17:0:s=p,new a(s,new l(o,i))};var y=function(t){let n=Object.create(null);function e(e){t.includes(e.key)&&(n[e.key]="keydown"==e.type,e.preventDefault())}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),n}(["ArrowLeft","ArrowRight","ArrowUp"]);function d(t){let n=null;requestAnimationFrame(function e(o){if(null!=n){let e=Math.min(o-n,100)/1e3;if(!1===t(e))return}n=o,requestAnimationFrame(e)})}var w=class t{constructor(t){}get type(){return"monster"}static create(n){return new t(n.plus(new l(0,-1)))}update(t,n){}collide(t){}};w.prototype.size=new l(1.2,2),r.M=w,function(t,n){let e=new n(document.body,t),o=i.start(t),s=1;new Promise(t=>{d(n=>(o=o.update(n,y),e.setState(o),"playing"==o.status||(s>0?(s-=n,!0):(e.clear(),t(o.status),!1))))})}(new o("\n..................................\n.################################.\n.#..............................#.\n.#..............................#.\n.#..............................#.\n.#...........................o..#.\n.#..@...........................#.\n.##########..............########.\n..........#..o..o..o..o..#........\n..........#...........M..#........\n..........################........\n..................................\n"),u),runGame(e,u)},function(t,n){document.write("platform game")},function(t,n,e){e(1),t.exports=e(0)}]);