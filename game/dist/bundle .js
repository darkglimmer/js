!function(t){var e={};function o(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([function(t,e,o){"use strict";function s(t,e){this.x=t,this.y=e}function n(t,e,o){return this.pos=t,this.speed=e,this.reset=o,"="==ch?new n(t,new s(2,0)):"|"==ch?new n(t,new s(0,2)):"v"==ch?new n(t,new s(0,3),t):void 0}function r(t,e,o){return this.pos=t,this.basePos=t.plus(new s(.2,.1)),this.wobble=o,new r(e,e,Math.random()*Math.PI*2)}o.r(e),s.prototype.plus=function(t){return new s(this.x+t.x,this.y+t.y)},s.prototype.times=function(t){return new s(this.x*t,this.y*t)},n.prototype.type="lava",n.prototype.size=new s(1,1),n.prototype.collide=function(t){return new State(t.level,t.actors,"lost")},n.prototype.update=function(t,e){let o=this.pos.plus(this.speed.times(t));return e.level.touches(o,this.size,"wall")?this.reset?new n(this.reset,this.speed,this.reset):new n(this.pos,this.speed.times(-1)):new n(o,this.speed,this.reset)},r.prototype.type="coin",r.prototype.size=new s(.6,.6),r.prototype.collide=function(t){let e=t.actors.filter(t=>t!=this),o=t.status;return e.some(t=>"coin"==t.type)||(o="won"),new State(t.level,e,o)};function i(t,e){return this.pos=t,this.speed=e,new i(t.plus(new s(0,-.5)),new s(0,0))}r.prototype.update=function(t){let e=this.wobble+8*t,o=.07*Math.sin(e);return new r(this.basePos.plus(new s(0,o)),this.basePos,e)},i.prototype.type="player",i.prototype.size=new s(.8,1.5),i.prototype.update=function(t,e,o){let n=0;o.ArrowLeft&&(n-=l),o.ArrowRight&&(n+=l);let r=this.pos,u=r.plus(new s(n*t,0));e.level.touches(u,this.size,"wall")||(r=u);let c=this.speed.y+t*a,h=r.plus(new s(0,c*t));return e.level.touches(h,this.size,"wall")?c=o.ArrowUp&&c>0?-p:0:r=h,new i(r,new s(n,c))};var l=7,a=30,p=17;(void 0)();Player,Coin,Lava,Lava,Lava;function u(t,e,o){return this.level=t,this.actors=e,this.status=o,this.actors.find(t=>"player"==t.type)}Level.prototype.touches=function(t,e,o){for(var s=Math.floor(t.x),n=Math.ceil(t.x+e.x),r=Math.floor(t.y),i=Math.ceil(t.y+e.y),l=r;l<i;l++)for(var a=s;a<n;a++){if((a<0||a>=this.width||l<0||l>=this.height?"wall":this.rows[l][a])==o)return!0}return!1},u.prototype.start=function(t){return new u(t,t.startActors,"playing")},u.prototype.update=function(t,e){let o=this.actors.map(o=>o.update(t,this,e)),s=new u(this.level,o,this.status);if("playing"!=s.status)return s;let n=s.player;if(this.level.touches(n.pos,n.size,"lava"))return new u(this.level,o,"lost");for(let t of o)t!=n&&overlap(t,n)&&(s=t.collide(s));return s};let c=new Level(simpleLevelPlan);function h(t,e,...o){let s=document.createElement(t);for(let t of Object.keys(e))s.setAttribute(t,e[t]);for(let t of o)s.appendChild(t);return s}function y(t,e){this.dom=h("div",{class:"game"},function(t){return h("table",{class:"background",style:`width: ${t.width*d}px`},...t.rows.map(t=>h("tr",{style:`height: ${d}px`},...t.map(t=>h("td",{class:t})))))}(e)),this.actorLayer=null,t.appendChild(this.dom)}console.log(`${c.width} by ${c.height}`),y.prototype.setState=function(t){this.actorLayer&&this.actorLayer.remove(),this.actorLayer=h("div",{},...t.actors.map(t=>{let e=h("div",{class:`actor ${t.type}`});return e.style.width=`${t.size.x*d}px`,e.style.height=`${t.size.y*d}px`,e.style.left=`${t.pos.x*d}px`,e.style.top=`${t.pos.y*d}px`,e})),this.dom.appendChild(this.actorLayer),this.dom.className=`game ${t.status}`,this.scrollPlayerIntoView(t)},y.prototype.scrollPlayerIntoView=function(t){let e=this.dom.clientWidth,o=this.dom.clientHeight,s=e/3,n=this.dom.scrollLeft,r=n+e,i=this.dom.scrollTop,l=i+o,a=t.player,p=a.pos.plus(a.size.times(.5)).times(d);p.x<n+s?this.dom.scrollLeft=p.x-s:p.x>r-s&&(this.dom.scrollLeft=p.x+s-e),p.y<i+s?this.dom.scrollTop=p.y-s:p.y>l-s&&(this.dom.scrollTop=p.y+s-o)},y.prototype.clear=function(){this.dom.remove()};var d=20;function f(t){let e=null;requestAnimationFrame(function o(s){if(null!=e){let o=Math.min(s-e,100)/1e3;if(!1===t(o))return}e=s,requestAnimationFrame(o)})}function w(t,e){let o=new e(document.body,t),s=State.start(t),n=1;return new Promise(t=>{f(e=>(s=s.update(e,m),o.setState(s),"playing"==s.status||(n>0?(n-=e,!0):(o.clear(),t(s.status),!1))))})}var m=function(t){let e=Object.create(null);function o(o){t.includes(o.key)&&(e[o.key]="keydown"==o.type,o.preventDefault())}return window.addEventListener("keydown",o),window.addEventListener("keyup",o),e}(["ArrowLeft","ArrowRight","ArrowUp"]);function w(t,e){let o=new e(document.body,t),s=State.start(t),n=1;return new Promise(t=>{f(e=>(s=s.update(e,m),o.setState(s),"playing"==s.status||(n>0?(n-=e,!0):(o.clear(),t(s.status),!1))))})}!async function(t,e){for(let o=0;o<t.length;)"won"==await w(new Level(t[o]),e)?o++:console.log("livesï¼š"+(t.length-o));console.log("You've won!")}(void 0,y)},function(t,e){document.write("platform game")},function(t,e,o){o(1),t.exports=o(0)}]);