!function(t){var n={};function e(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}([function(t,n){function e(t,n){this.x=t,this.y=n}function o(t,n,s){return this.pos=t,this.speed=n,this.reset=s,"="==ch?new o(t,new e(2,0)):"|"==ch?new o(t,new e(0,2)):"v"==ch?new o(t,new e(0,3),t):void 0}function s(t,n,o){return this.pos=t,this.basePos=t.plus(new e(.2,.1)),this.wobble=o,new s(n,n,Math.random()*Math.PI*2)}e.prototype.plus=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.times=function(t){return new e(this.x*t,this.y*t)},o.prototype.type="lava",o.prototype.size=new e(1,1),o.prototype.collide=function(t){return new State(t.level,t.actors,"lost")},o.prototype.update=function(t,n){let e=this.pos.plus(this.speed.times(t));return n.level.touches(e,this.size,"wall")?this.reset?new o(this.reset,this.speed,this.reset):new o(this.pos,this.speed.times(-1)):new o(e,this.speed,this.reset)},s.prototype.type="coin",s.prototype.size=new e(.6,.6),s.prototype.collide=function(t){let n=t.actors.filter(t=>t!=this),e=t.status;return n.some(t=>"coin"==t.type)||(e="won"),new State(t.level,n,e)};function r(t,n){return this.pos=t,this.speed=n,new r(t.plus(new e(0,-.5)),new e(0,0))}s.prototype.update=function(t){let n=this.wobble+8*t,o=.07*Math.sin(n);return new s(this.basePos.plus(new e(0,o)),this.basePos,n)},r.prototype.type="player",r.prototype.size=new e(.8,1.5),r.prototype.update=function(t,n,o){let s=0;o.ArrowLeft&&(s-=i),o.ArrowRight&&(s+=i);let p=this.pos,u=p.plus(new e(s*t,0));n.level.touches(u,this.size,"wall")||(p=u);let h=this.speed.y+t*l,c=p.plus(new e(0,h*t));return n.level.touches(c,this.size,"wall")?h=o.ArrowUp&&h>0?-a:0:p=c,new r(p,new e(s,h))};var i=7,l=30,a=17;t.exports=e},function(t,n,e){var o=e(0),s={".":"empty","#":"wall","+":"lava","@":Player,o:Coin,"=":Lava,"|":Lava,v:Lava};function r(t){let n=t.trim().split("\n").map(t=>[...t]);this.height=n.length,this.width=n[0].length,this.startActors=[],this.rows=n.map((t,n)=>t.map((t,e)=>{let r=s[t];return"string"==typeof r?r:(this.startActors.push(r.create(new o(e,n),t)),"empty")}))}function i(t,n,e){return this.level=t,this.actors=n,this.status=e,this.actors.find(t=>"player"==t.type)}r.prototype.touches=function(t,n,e){for(var o=Math.floor(t.x),s=Math.ceil(t.x+n.x),r=Math.floor(t.y),i=Math.ceil(t.y+n.y),l=r;l<i;l++)for(var a=o;a<s;a++){if((a<0||a>=this.width||l<0||l>=this.height?"wall":this.rows[l][a])==e)return!0}return!1},i.prototype.start=function(t){return new i(t,t.startActors,"playing")},i.prototype.update=function(t,n){let e=this.actors.map(e=>e.update(t,this,n)),o=new i(this.level,e,this.status);if("playing"!=o.status)return o;let s=o.player;if(this.level.touches(s.pos,s.size,"lava"))return new i(this.level,e,"lost");for(let t of e)t!=s&&overlap(t,s)&&(o=t.collide(o));return o};let l=new Level(simpleLevelPlan);console.log(`${l.width} by ${l.height}`),t.exports=r},function(t,n,e){e(1);var o=["                                                    \n................................................................................\n................................................................................\n................................................................................\n................................................................................\n................................................................................\n................................................................................\n..................................................................###...........\n...................................................##......##....##+##..........\n....................................o.o......##..................#+++#..........\n.................................................................##+##..........\n...................................#####..........................#v#...........\n............................................................................##..\n..##......................................o.o................................#..\n..#.....................o....................................................#..\n..#......................................#####.............................o.#..\n..#..........####.......o....................................................#..\n..#..@.......#..#................................................#####.......#..\n..############..###############...####################.....#######...#########..\n..............................#...#..................#.....#....................\n..............................#+++#..................#+++++#....................\n..............................#+++#..................#+++++#....................\n..............................#####..................#######....................\n................................................................................\n................................................................................\n","                                                                     \n................................................................................\n................................................................................\n....###############################.............................................\n...##.............................##########################################....\n...#.......................................................................##...\n...#....o...................................................................#...\n...#................................................=.......................#...\n...#.o........################...................o..o...........|........o..#...\n...#.........................#..............................................#...\n...#....o....................##########.....###################....##########...\n...#..................................#+++++#.................#....#............\n...###############....oo......=o.o.o..#######.###############.#....#............\n.....#...............o..o.............#.......#......#........#....#............\n.....#....................#############..######.####.#.########....########.....\n.....#.............########..............#...........#.#..................#.....\n.....#..........####......####...#####################.#..................#.....\n.....#........###............###.......................########....########.....\n.....#.......##................#########################......#....#............\n.....#.......#................................................#....#............\n.....###......................................................#....#............\n.......#...............o...........................................#............\n.......#...............................................o...........#............\n.......#########......###.....############.........................##...........\n.............#..................#........#####....#######.o.........########....\n.............#++++++++++++++++++#............#....#.....#..................#....\n.............#++++++++++++++++++#..........###....###...####.o.............#....\n.............####################..........#........#......#.....|.........#....\n...........................................#++++++++#......####............#....\n...........................................#++++++++#.........#........@...#....\n...........................................#++++++++#.........##############....\n...........................................##########...........................\n................................................................................\n","\n......................................#++#........................#######....................................#+#..\n......................................#++#.....................####.....####.................................#+#..\n......................................#++##########...........##...........##................................#+#..\n......................................##++++++++++##.........##.............##...............................#+#..\n.......................................##########++#.........#....................................o...o...o..#+#..\n................................................##+#.........#.....o...o....................................##+#..\n.................................................#+#.........#................................###############++#..\n.................................................#v#.........#.....#...#........................++++++++++++++##..\n.............................................................##..|...|...|..##............#####################...\n..............................................................##+++++++++++##............v........................\n...............................................................####+++++####......................................\n...............................................#.....#............#######........###.........###..................\n...............................................#.....#...........................#.#.........#.#..................\n...............................................#.....#.............................#.........#....................\n...............................................#.....#.............................##........#....................\n...............................................##....#.............................#.........#....................\n...............................................#.....#......o..o.....#...#.........#.........#....................\n...............#######........###...###........#.....#...............#...#.........#.........#....................\n..............##.....##.........#...#..........#.....#.....######....#...#...#########.......#....................\n.............##.......##........#.o.#..........#....##...............#...#...#...............#....................\n.....@.......#.........#........#...#..........#.....#...............#...#...#...............#....................\n....###......#.........#........#...#..........#.....#...............#...#####...######......#....................\n....#.#......#.........#.......##.o.##.........#.....#...............#.....o.....#.#.........#....................\n++++#.#++++++#.........#++++++##.....##++++++++##....#++++++++++.....#.....=.....#.#.........#....................\n++++#.#++++++#.........#+++++##.......##########.....#+++++++##+.....#############.##..o.o..##....................\n++++#.#++++++#.........#+++++#....o.................##++++++##.+....................##.....##.....................\n++++#.#++++++#.........#+++++#.....................##++++++##..+.....................#######......................\n++++#.#++++++#.........#+++++##.......##############++++++##...+..................................................\n++++#.#++++++#.........#++++++#########++++++++++++++++++##....+..................................................\n++++#.#++++++#.........#++++++++++++++++++++++++++++++++##.....+..................................................\n","\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n........................................o.....................................................................\n..............................................................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n.......................................###....................................................................\n.......................................#.#.................+++........+++..###................................\n.......................................#.#.................+#+........+#+.....................................\n.....................................###.###................#..........#......................................\n......................................#...#.................#...oooo...#.......###............................\n......................................#...#.................#..........#......#+++#...........................\n......................................#...#.................############.......###............................\n.....................................##...##......#...#......#................................................\n......................................#...#########...########..............#.#...............................\n......................................#...#...........#....................#+++#..............................\n......................................#...#...........#.....................###...............................\n.....................................##...##..........#.......................................................\n......................................#...#=.=.=.=....#............###........................................\n......................................#...#...........#...........#+++#.......................................\n......................................#...#....=.=.=.=#.....o......###.......###..............................\n.....................................##...##..........#.....................#+++#.............................\n..............................o...o...#...#...........#.....#................##v........###...................\n......................................#...#...........#..............#.................#+++#..................\n.............................###.###.###.###.....o.o..#++++++++++++++#...................v#...................\n.............................#.###.#.#.###.#..........#++++++++++++++#........................................\n.............................#.............#...#######################........................................\n.............................##...........##.........................................###......................\n..###.........................#.....#.....#.........................................#+++#................###..\n..#.#.........................#....###....#..........................................###.................#.#..\n..#...........................#....###....#######........................#####.............................#..\n..#...........................#...........#..............................#...#.............................#..\n..#...........................##..........#..............................#.#.#.............................#..\n..#.......................................#.......|####|....|####|.....###.###.............................#..\n..#................###.............o.o....#..............................#.........###.....................#..\n..#...............#####.......##..........#.............................###.......#+++#..........#.........#..\n..#...............o###o.......#....###....#.............................#.#........###..........###........#..\n..#................###........#############..#.oo.#....#.oo.#....#.oo..##.##....................###........#..\n..#......@..........#.........#...........#++#....#++++#....#++++#....##...##....................#.........#..\n..#############################...........#############################.....################################..\n..............................................................................................................\n..............................................................................................................\n","\n..................................................................................................###.#.......\n......................................................................................................#.......\n..................................................................................................#####.......\n..................................................................................................#...........\n..................................................................................................#.###.......\n..........................o.......................................................................#.#.#.......\n.............................................................................................o.o.o###.#.......\n...................###................................................................................#.......\n.......+..o..+................................................#####.#####.#####.#####.#####.#####.#####.......\n.......#.....#................................................#...#.#...#.#...#.#...#.#...#.#...#.#...........\n.......#=.o..#............#...................................###.#.###.#.###.#.###.#.###.#.###.#.#####.......\n.......#.....#..................................................#.#...#.#...#.#...#.#...#.#...#.#.....#.......\n.......+..o..+............o..................................####.#####.#####.#####.#####.#####.#######.......\n..............................................................................................................\n..........o..............###..............................##..................................................\n..............................................................................................................\n..............................................................................................................\n......................................................##......................................................\n...................###.........###............................................................................\n..............................................................................................................\n..........................o.....................................................#......#......................\n..........................................................##.....##...........................................\n.............###.........###.........###.................................#..................#.................\n..............................................................................................................\n.................................................................||...........................................\n..###########.................................................................................................\n..#.........#.o.#########.o.#########.o.##................................................#...................\n..#.........#...#.......#...#.......#...#.................||..................#.....#.........................\n..#..@......#####...o...#####...o...#####.....................................................................\n..#######.....................................#####.......##.....##.....###...................................\n........#=..................=................=#...#.....................###...................................\n........#######################################...#+++++++++++++++++++++###+++++++++++++++++++++++++++++++++++\n..................................................############################################################\n..............................................................................................................\n"];function s(t,n,...e){let o=document.createElement(t);for(let t of Object.keys(n))o.setAttribute(t,n[t]);for(let t of e)o.appendChild(t);return o}function r(t,n){this.dom=s("div",{class:"game"},function(t){return s("table",{class:"background",style:`width: ${t.width*i}px`},...t.rows.map(t=>s("tr",{style:`height: ${i}px`},...t.map(t=>s("td",{class:t})))))}(n)),this.actorLayer=null,t.appendChild(this.dom)}r.prototype.setState=function(t){this.actorLayer&&this.actorLayer.remove(),this.actorLayer=s("div",{},...t.actors.map(t=>{let n=s("div",{class:`actor ${t.type}`});return n.style.width=`${t.size.x*i}px`,n.style.height=`${t.size.y*i}px`,n.style.left=`${t.pos.x*i}px`,n.style.top=`${t.pos.y*i}px`,n})),this.dom.appendChild(this.actorLayer),this.dom.className=`game ${t.status}`,this.scrollPlayerIntoView(t)},r.prototype.scrollPlayerIntoView=function(t){let n=this.dom.clientWidth,e=this.dom.clientHeight,o=n/3,s=this.dom.scrollLeft,r=s+n,l=this.dom.scrollTop,a=l+e,p=t.player,u=p.pos.plus(p.size.times(.5)).times(i);u.x<s+o?this.dom.scrollLeft=u.x-o:u.x>r-o&&(this.dom.scrollLeft=u.x+o-n),u.y<l+o?this.dom.scrollTop=u.y-o:u.y>a-o&&(this.dom.scrollTop=u.y+o-e)},r.prototype.clear=function(){this.dom.remove()};var i=20;function l(t){let n=null;requestAnimationFrame(function e(o){if(null!=n){let e=Math.min(o-n,100)/1e3;if(!1===t(e))return}n=o,requestAnimationFrame(e)})}function a(t,n){let e=new n(document.body,t),o=State.start(t),s=1;return new Promise(t=>{l(n=>(o=o.update(n,p),e.setState(o),"playing"==o.status||(s>0?(s-=n,!0):(e.clear(),t(o.status),!1))))})}var p=function(t){let n=Object.create(null);function e(e){t.includes(e.key)&&(n[e.key]="keydown"==e.type,e.preventDefault())}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),n}(["ArrowLeft","ArrowRight","ArrowUp"]);function a(t,n){let e=new n(document.body,t),o=State.start(t),s=1;return new Promise(t=>{l(n=>(o=o.update(n,p),e.setState(o),"playing"==o.status||(s>0?(s-=n,!0):(e.clear(),t(o.status),!1))))})}!async function(t,n){for(let e=0;e<t.length;)"won"==await a(new e(t[e]),n)?e++:console.log("lives："+(t.length-e));console.log("You've won!")}(o,r)},function(t,n){document.write("platform game")},function(t,n,e){e(3),t.exports=e(2)}]);